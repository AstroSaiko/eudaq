FIND_PACKAGE(ZestSC1 REQUIRED)
FIND_PACKAGE(LIBUSB REQUIRED)
FIND_PACKAGE(TLUFirmware REQUIRED)

ADD_DEFINITIONS(${TLUFIRMWARE_DEFINITIONS})

INCLUDE_DIRECTORIES(include ${ZESTSC1_INCLUDE_DIRS} ${LIBUSB_INCLUDE_DIRS})

ADD_EXECUTABLE(TLUControl src/TLUControl.cxx src/TLUController.cc src/TLU_USB.cc src/USBTracer.cc src/TLUAddresses1.cc src/TLUAddresses2.cc src/win_uSleep.cc)
ADD_EXECUTABLE(TLUProducer src/TLUProducer.cxx src/TLUController.cc src/TLU_USB.cc src/USBTracer.cc src/TLUAddresses1.cc src/TLUAddresses2.cc src/win_uSleep.cc)
ADD_EXECUTABLE(TLUReset src/TLUReset.cxx src/TLUController.cc src/TLU_USB.cc src/USBTracer.cc src/TLUAddresses1.cc src/TLUAddresses2.cc src/win_uSleep.cc)

TARGET_LINK_LIBRARIES(TLUControl   EUDAQ ${EUDAQ_THREADS_LIB} ${LIBUSB_LIBRARIES} ${ZESTSC1_LIBRARIES})
TARGET_LINK_LIBRARIES(TLUProducer   EUDAQ ${EUDAQ_THREADS_LIB} ${LIBUSB_LIBRARIES} ${ZESTSC1_LIBRARIES})
TARGET_LINK_LIBRARIES(TLUReset   EUDAQ ${EUDAQ_THREADS_LIB} ${LIBUSB_LIBRARIES} ${ZESTSC1_LIBRARIES})

INSTALL(TARGETS TLUControl TLUProducer TLUReset
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib)
